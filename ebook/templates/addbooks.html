{% load staticfiles %}
<!DOCTYPE html>
<!-- Template by Quackit.com -->
<html lang="zh">
<head>
    <meta charset="butf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>CMS.电子图书文档管理工具.增加图书资料</title>

    <script src="{% static 'bootstrap-3.3.7/js/jquery-1.11.3.min.js' %}"></script>
    <script src="{% static 'bootstrap-3.3.7/js/bootstrap.min.js' %}" type="text/javascript"></script>
    <link href="{% static 'bootstrap-3.3.7/css/bootstrap.min.css' %}" rel="stylesheet">
    <link href="{% static 'bootstrap-3.3.7/css/custom.css' %}" rel="stylesheet"> 
 	<script src="{% static 'bootstrap-3.3.7/js/holder.js' %}"></script>
 	<script src="{% static 'bootstrap-3.3.7/js/validator.min.js' %}"></script>
    <link href="{% static 'bootstrap-3.3.7/css/fileinput.css' %}" media="all" rel="stylesheet" type="text/css"/>
    <link href="{% static 'font-awesome-4.7.0/css/font-awesome.min.css' %}" media="all" rel="stylesheet" type="text/css"/>
    <link href="{% static 'bootstrap-3.3.7/themes/explorer-fa/theme.css' %}" media="all" rel="stylesheet" type="text/css"/>
    <script src="{% static 'bootstrap-3.3.7/js/plugins/sortable.js' %}" type="text/javascript"></script>
    <script src="{% static 'bootstrap-3.3.7/js/fileinput.js' %}" type="text/javascript"></script>
    <script src="{% static 'bootstrap-3.3.7/js/locales/zh.js' %}" type="text/javascript"></script>
    <script src="{% static 'bootstrap-3.3.7/themes/explorer-fa/theme.js' %}" type="text/javascript"></script>
    <script src="{% static 'bootstrap-3.3.7/themes/fa/theme.js' %}" type="text/javascript"></script>
    <script src="{% static 'bootstrap-3.3.7/js/popper.js' %}" type="text/javascript"></script>

    <script>
     $(document).ready(function(){
         $("#savepublishertypebtn").click(function()
             {
                 $.post("/ebook/addpublisher/",
                        {
                            typename:$("#addpublishername").val()
                        },
                        function(ret){
                            $("#savepublisherinfo").html(ret)
                        });
             });
     });
    </script>


</head>

<body>

    <!-- Navigation -->
    <nav class="navbar navbar-inverse navbar-static-top" role="navigation">
        <div class="container">

            <!-- Navbar links -->
            <div class="collapse navbar-collapse" id="navbar">
                <ul class="nav navbar-nav">
                    <li class="active">
                        <a href="/home/">首页</a>
                    </li>
                    <li class="active">
                        <a href="/ebook/">返回</a>
                    </li>

                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container  导航头部 -->
    </nav>

    <div class="container-fluid">
	    <!-- 下面为显示区， -->
    	<!-- 共两列 -->
        <div class="col-sm-1">
        </div>
		<div class="col-sm-3">

			<!-- List-Group Panel -->
          <div class ="row">
              <form class="form-horizontal" data-toggle="validator" role="form" method="post">
                <fieldset>
                    <div id="legend" class="">
                        <legend id ="savepublisherinfo"class="">
                            增加出版社
                        </legend>
                    </div>
                    <div class="control-group">
                        <label class="control-label" for="input01">出版社名称</label>
                        <div class="controls">
                            <input type="text" placeholder="请输入出版社名称" class="form-control input-xlarge" name ="addpublishername" id="addpublishername" required
                                   data-bv-notempty-message="firstName不能为空(提示语)" >
                            <div class="help-block">系统中用到的出版社名称或图书源出处</div>
                        </div>
                    </div>

                    <div class="control-group">
                        <div class="controls">
                            <button type="button" id ="savepublisherbtn"class="btn btn-primary">保存</button> 
                        </div>
                    </div>

                </fieldset>
              </form>
          </div>
          <hr><hr>

          <div class="row">
                  <form class="form-horizontal" data-toggle="validator" role="form" method="post" action="/ebook/addbooktype/" >
                      <fieldset>
                          <div id="legend" class="">
                              <legend class="">{%if dotype == 3 and isaddbooktype%}
                                  增加图书类别({{pname}})成功
                                  {%else%}
                                  {%if dotype == -100 and isaddbooktype%}
                                  类别({{pname}})已存在
                                  {%else%}
                                  增加图书类别
                                  {%endif%}
                                  {%endif%}
                              </legend>
                          </div>
                          <div class="control-group">
                              <label class="control-label" for="input01">类别名称</label>
                              <div class="controls">
                                  <input type="text" placeholder="请输入图书类别名称" class="form-control input-xlarge" name ="addbooktypename" required
                                         data-bv-notempty-message="类别名称不能为空！" >
                                  <div class="help-block">系统中用到的图书大分类、主分类</div>
                              </div>
                          </div>

                          <div class="control-group">
                              <div class="controls">
                                  <button type="submit" class="btn btn-primary">保存</button> 
                              </div>
                          </div>

                      </fieldset>
                  </form>
          </div>
          <hr><hr>

        </div> <!-- 左列 -->

        <div class="col-sm-1">
        </div>
		<!-- Center Column 中间列，主显示区，占6格（一半）-->
		<div class="col-sm-6">

			<div class="row">
					<!-- 下面是增加图书资源form  -->
                <form class="form-horizontal" action="/ebook/addbooks/" method ="post"  data-toggle="validator" role="form">
                        <fieldset>
                            <div id="legend" class="">
                                <legend class="">
                                    {%if dotype == 4 and isaddbook%}
                                    增加图书资源({{bookname}})成功
                                    {%else%}
                                    {%if dotype == -100 and isaddbook%}
                                    增加图书资源错误({{pname}})
                                    {%else%}
                                    增加图书资源
                                    {%endif%}
                                    {%endif%}
                                    </legend>
                            </div>

                            <div class="control-group">
                                <div class="controls">
                                    <input type="text" class="form-control input-xlarge" value="{{bookid}}" style="display:none" id="addbookid" name="addbookid">
                                </div>
                            </div>

                            <div class="control-group">
                                <label class="control-label" for="input01">图书资源名称</label>
                                <div class="controls">
                                    <input type="text" placeholder="图书书籍名称" class="form-control input-xlarge" name="addbookname" id="addbookname" required
                                           {%if dotype == 4 and isaddbook%}
                                           value="{{bookname}}"
                                           {%endif%}>
                                    <p class="help-block">图书的细分名称，不一定是主要图书，可以是一个小类</p>
                                </div>
                            </div>

                            <div class="control-group">
                                <label class="control-label">分类</label>
                                <div class="controls">
                                    <select class="form-control input-xlarge" name="addbookselecttype" id="addbookselecttype">
                                        {% for name in btblist%}
                                        <option>{{name}}</option>
                                        {%endfor%}
                                    </select>
                                </div>
                                <script type="text/javascript">
                                 $(function(){
                                     $("#addbookselecttype").val("{{booktypename}}");
                                 });
                                </script>

                            </div><div class="control-group">

                                <!-- Select Basic -->
                                <label class="control-label">出版社</label>
                                <div class="controls">
                                    <select class="form-control input-xlarge" name="addbookselectpublisher" id="addbookselectpublisher">
                                        {% for name in pblist%}
                                        <option>{{name}}</option>
                                        {%endfor%}
                                    </select>
                                </div>
                                <script type="text/javascript">
                                 $("#addbookselectpublisher").val("{{publishername}}")
                                </script>
                            </div>
                            <div class="control-group">
                                <label class="control-label">作者</label>
                                <input type="text" placeholder="作者" class="form-control input-xlarge" name="addbookauthor" id="addbookauthor" required
                                       {%if dotype == 4 and isaddbook%}
                                       value="{{bookauthors}}"
                                       {%endif%}>
                                <p class="help-block">图书的作者，多个作者以空格分开</p>
                            </div><div class="control-group">

                                <label class="control-label">内容简介</label>
                                <div class="controls">
                                    <div class="textarea">
                                        <textarea type=""   style="height:300px" class="form-control" name="addbookmemo" id="addbookmemo" required>
                                           {%if dotype == 4 and isaddbook%}
                                           {{detial}}
                                           {%endif%}
                                        </textarea>
                                    </div>
                                </div>
                            </div>
                            <div class="control-group">
                                <div class="controls">
                                 <label><input type="checkbox" class="from-control" id="modifydata" name="modifydata" value="OK">修改数据</label>
                                 <button type="submit" class="btn btn-primary">保存</button>
                                 <button type="reset" class="btn btn-info">重设</button>
                             </div>
                            </div>
                        </fieldset>
                    </form>  <!-- 增加图书 FORM -->
            </div>   <!-- addbooks row -->
            <hr>
            <div class="row"> <!-- uloadfiles row -->
                <form class="form-horizontal" method="post" enctype='multipart/form-data' action="/ebook/uploadfiles/">
                    <div class="controls">
                        <input type="file" class="file form-control"  id="files-my" name="files-my" multiple>
                    </div>
                    <div class="control-group">
                        <div class="controls">
                            <input type="text" class="form-control input-xlarge" name="bookid" id="bookid" value="{{bookid}}" style="display:none">
                        </div>
                    </div>
                    <div class="control-group">
                        <div class="controls">
                            <button type="submit" class="btn btn-primary">保存</button>
                            <button type="reset" class="btn btn-info">重设</button>
                        </div>
                    </div>

                </form>
            </div> <!-- 上传文件ROW -->
            <script type="text/javascript">
             $("#files-my").fileinput({
                 language: 'zh', //设置语言
                 theme: 'explorer-fa',
                 uploadUrl: "/ebook/uploadfiles/", //上传的地址
                 allowedFileExtensions: ['rar','zip','xls','xlsx','doc','docx','pdf','txt','ceb','txt'],//接收的文件后缀
                 uploadAsync: true, //默认异步上传
                 showUpload: false, //是否显示上传按钮
                 showRemove : false, //显示移除按钮
                 showPreview : true, //是否显示预览
                 showCaption: true,//是否显示标题
                 //browseClass: "btn btn-primary", //按钮样式     
                 dropZoneEnabled: false,//是否显示拖拽区域
                 //minImageWidth: 50, //图片的最小宽度
                 //minImageHeight: 50,//图片的最小高度
                 //maxImageWidth: 1000,//图片的最大宽度
                 //maxImageHeight: 1000,//图片的最大高度
                 maxFileSize: 102400,//单位为kb，如果为0表示不限制文件大小
                 //minFileCount: 0,
                 maxFileCount: 10, //表示允许同时上传的最大文件个数
                 enctype: 'multipart/form-data',
                 validateInitialCount:true,
                 //previewFileIcon: "<i class='glyphicon glyphicon-king'></i>",
                 msgFilesTooMany: "选择上传的文件数量({n}) 超过允许的最大数值{m}！",
             });
            </script>

          </div>  <!-- 中间一列 -->

          <div class="col-sm-1">  <!-- right col space-1 -->
           </div>
  </div><!--/container-fluid-->

                             <!-- jQuery -->
    <script src="{% static 'bootstrap-3.3.7/js/jquery-1.11.3.min.js' %}"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="{% static 'bootstrap-3.3.7/js/bootstrap.min.js' %}"></script>
	
	<!-- IE10 viewport bug workaround -->
	<script src="{% static 'bootstrap-3.3.7/js/ie10-viewport-bug-workaround.js' %}"></script>
	
	<!-- Placeholder Images -->
	<script src="{% static 'bootstrap-3.3.7/js/holder.js' %}"></script>

    <script src="{% static 'bootstrap-3.3.7/js/validator.min.js' %}"></script>

</body>

</html>
